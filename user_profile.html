<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>User Profile</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <style>
    :root {
      --bg: #060039;
      --bg-soft: #0b0660;
      --card: #0d0870;
      --text: #e6e6ff;
      --muted: #a7a7c7;
      --accent: #6a5cff;
      --accent-2: #8f87ff;
      --shadow: rgba(0,0,0,.35);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 800px at 80% -10%, #100a7a 0%, var(--bg) 60%);
      color: var(--text);
      margin: 0;
      padding: 0;
    }

    /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
    .top-bar {
      position: sticky;
      top: 0;
      z-index: 20;
      display: flex;
      align-items: center;
      padding: 10px 14px;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    #userTopBar { justify-content: space-between; }
    #userTopBar .title {
      flex: 1;
      text-align: center;
      font-weight: 700;
      font-size: 17px;
      letter-spacing: .3px;
      color: var(--accent-2);
    }

    .icon-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #090975;
      border: 1px solid rgba(255,255,255,.08);
      color: var(--text);
      font-size: 16px;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      cursor: pointer;
      transition: all .25s ease;
      box-shadow: 0 4px 12px var(--shadow);
    }

    /* –ö–æ–Ω—Ç–µ–Ω—Ç */
    .settings-wrap {
      max-width: 860px;
      margin: 0 auto;
      padding: 24px 16px 40px;
    }

    /* –ü—Ä–æ—Ñ–∏–ª—å */
    .profile-card {
      display: flex;
      align-items: center;
      gap: 20px;
      background: linear-gradient(180deg, var(--card), #0b0862);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px;
      padding: 20px;
      box-shadow: 0 12px 32px var(--shadow);
      margin-bottom: 24px;
    }
    .avatar-wrap {
      position: relative;
      flex-shrink: 0;
    }
    #avatarImg {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid var(--accent);
      box-shadow: 0 8px 24px rgba(95, 87, 255, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .avatar-upload-btn {
      position: absolute;
      bottom: 0;
      right: 0;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px; height: 40px;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
      box-shadow: 0 4px 12px rgba(95, 87, 255, 0.5);
      transition: all 0.25s ease;
    }
    #avatarInput { display: none; }

    .profile-info {
      flex: 1;
    }
    #nameInput {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg-soft);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px;
      font-size: 16px;
      margin-bottom: 12px;
      text-align: left;
    }
    #nameInput:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(95, 87, 255, 0.25);
    }
    .name-save-btn, .avatar-delete-btn {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      border: none;
      padding: 10px 22px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      font-size: 15px;
      transition: all .25s ease;
      margin-right: 8px;
    }
    .avatar-delete-btn {
      background: linear-gradient(135deg, #ff4d4d, #ff7878);
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–µ–∫—Ü–∏–π */
    .card {
      background: linear-gradient(180deg, var(--card), #0b0862);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px;
      padding: 20px;
      box-shadow: 0 12px 32px var(--shadow);
      margin-bottom: 20px;
    }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }
    .card-header h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .collapsible-content {
      padding: 12px 0 0;
      display: none;
      font-size: 14px;
      line-height: 1.5;
      color: var(--muted);
      animation: fadeIn .3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-6px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #usageTimes ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #usageTimes li {
      margin-bottom: 6px;
    }

    @media (max-width: 560px) {
      .profile-card { flex-direction: column; align-items: center; text-align: center; }
      .profile-info { width: 100%; }
      #avatarImg { width: 100px; height: 100px; }
      .avatar-delete-btn{margin-top: 2.5%}
    }
  </style>
</head>
<body>
  <div id="userMenu">
    <div class="top-bar" id="userTopBar">
      <button class="icon-btn" id="userBackBtn" title="Back"><i class="fa-solid fa-arrow-left"></i></button>
      <span class="title" data-translate="userTitle" id="userTitle"></span>
      <span style="width:40px; height:40px;"></span>
    </div>

    <div class="settings-wrap">
      <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å -->
      <div class="profile-card">
        <div class="avatar-wrap">
          <img id="avatarImg" src="" alt="Profile Avatar" />
          <label for="avatarInput" class="avatar-upload-btn" title="Change Avatar">
            <i class="fa-solid fa-camera"></i>
          </label>
          <input type="file" id="avatarInput" accept="image/*" />
        </div>
        <div class="profile-info">
          <input type="text" id="nameInput" placeholder="Enter your name" maxlength="20" />
          <button class="name-save-btn" onclick="saveName()">
            <i class="fa-solid fa-save"></i> <span id="save">Save</span>
          </button>
          <button class="avatar-delete-btn" onclick="deleteAvatar()">
            <i class="fa-solid fa-trash"></i> <span id="deleteAvatar">Delete Avatar</span>
          </button>
        </div>
      </div>

      <!-- –ò—Å—Ç–æ—Ä–∏—è -->
      <div class="card">
        <div class="card-header">
          <h3 data-translate="historySectionTitle"><i class="fa-solid fa-clock-rotate-left"></i> History</h3>
          <button class="icon-btn toggle-btn"><i class="fa-solid fa-caret-down"></i></button>
        </div>
        <div class="collapsible-content">
          <!-- –ü–æ–¥–∫–∞—Ä—Ç–æ—á–∫–∞: –ò—Å—Ç–æ—Ä–∏—è –Ω–∏–∫–Ω–µ–π–º–æ–≤ -->
          <div class="card" style="margin-bottom: 12px; box-shadow: 0 6px 16px var(--shadow);">
            <div class="card-header">
              <h3 data-translate="nickHistoryTitle"><i class="fa-solid fa-user"></i> Nicknames History</h3>
              <button class="icon-btn toggle-btn"><i class="fa-solid fa-caret-down"></i></button>
            </div>
            <div class="collapsible-content">
              <div id="nickHistories"></div>
            </div>
          </div>
          <!-- –ü–æ–¥–∫–∞—Ä—Ç–æ—á–∫–∞: –ò—Å—Ç–æ—Ä–∏—è –æ–ø–∏—Å–∞–Ω–∏–π -->
          <div class="card" style="margin-bottom: 0;">
            <div class="card-header">
              <h3 data-translate="descHistoryTitle"><i class="fa-solid fa-file-alt"></i> Descriptions History</h3>
              <button class="icon-btn toggle-btn"><i class="fa-solid fa-caret-down"></i></button>
            </div>
            <div class="collapsible-content">
              <div id="descHistories"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- –í—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è -->
      <div class="card">
        <div class="card-header">
          <h3 data-translate="usageTimeTitle"><i class="fa-solid fa-hourglass-half"></i> Usage Time</h3>
          <button class="icon-btn toggle-btn"><i class="fa-solid fa-caret-down"></i></button>
        </div>
        <div class="collapsible-content">
          <div id="usageTimes"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // –°–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    const globalBadWords = [
      '–≥–æ–≤–Ω–æ', '—Ö–µ–π—Ç', '–ø–æ—Ä–Ω–æ', '–∞–Ω–æ–Ω–∏–º', 'admin', '–∞–¥–º–∏–Ω', 'moder', '–º–æ–¥–µ—Ä', '–º–æ–¥–µ—Ä–∞—Ç–æ—Ä',
      '–ø—Ä–æ–¥–∞–≤–µ—Ü –ø—Ä–µ–º–∏—É–º–∞', 'seller of premium', 'seller of premium account', '–ø—Ä–µ–º–∏—É–º', '–ø—Ä–µ–º–∏—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
      'premium user', '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–º–∏—É–º–∞', 'user of premium', 'user of premium account', '*', '"', "'",
      '—Å—É–∫–∞', '–ø–∏–¥–æ—Ä', '–ø–∏–¥–æ—Ä–∞—Å', '–º—Ä–∞–∑—å', '—É–±–ª—é–¥–æ–∫', '—Ç–≤–∞—Ä—å', '—Ö—É–π', '—Ö–µ—Ä', '–µ–±–ª–∞–Ω', '–µ–±–∞–Ω–∞—Ç', '–¥–∞—É–Ω',
      '–¥–µ–±–∏–ª', '–∏–¥–∏–æ—Ç', '—á–º–æ', '–≥–Ω–∏–¥–∞', '—Ç—É–ø–æ–π', '–±–ª—è–¥—å', '–±–ª—è', '—Ö—É–µ—Å–æ—Å', '–Ω–∞—Ö—É–π', '–ø–æ—à–µ–ª –Ω–∞—Ö—É–π',
      '–∏–¥–∏ –Ω–∞—Ö—É–π', '—É—Ä–æ–¥', '—Å–∫–æ—Ç–∏–Ω–∞', '—Å–≤–æ–ª–æ—á—å', '–º—É–¥–∞–∫', '–ø–µ—Ç—É—Ö', '—à–ª—é—Ö–∞', '–ø—Ä–æ—Å—Ç–∏—Ç—É—Ç–∫–∞', '—Å—É—á–∫–∞',
      '–ø–∞–¥–ª–∞', '–¥–æ–ª–±–æ–µ–±', '–¥–æ–ª–±–∞–µ–±', '–µ–±–∞–Ω—ã–π', '–µ–±–∞—Ç—å', '–∑–∞–ª—É–ø–∞', '–ø–∏–∑–¥–∞', '–ø–∏–∑–¥–µ—Ü', 'fuck', 'fucking',
      'bitch', 'asshole', 'bastard', 'dick', 'cock', 'pussy', 'shit', 'slut', 'whore', 'cunt', 'motherfucker',
      'nigger', 'nigga', 'retard', 'stupid', 'idiot', 'dumbass', 'loser', 'jerk', 'gay', 'fag', 'faggot',
      'suck', 'sucker', 'kill yourself', 'kms', 'puta', 'gilipollas', 'mierda', 'pendejo', 'cabron', 'maricon',
      'co√±o', 'idiota', 'imbecil', 'tonto', 'perra', 'arschloch', 'scheisse', 'hurensohn', 'fotze', 'wichser',
      'dummkopf', 'connard', 'salope', 'pute', 'merde', 'encul√©', 'con', 'stronzo', 'coglione', 'puttana',
      'troia', 'cretino', 'merda', 'caralho', 'filho da puta', 'ot√°rio', 'burro', 'sharmuta', 'ibn kalb',
      'ibn al sharmuta', 'kalb', 'khara', 'jahel', 'madarchod', 'behenchod', 'chutiya', 'bhosdike', 'lund',
      'randi', 'harami', 'orospu', 'siktir', 'amk', 'mal', 'aptal', 'gerizekali', 'kurwa', 'pierdol', 'chuj',
      'jebac', 'debil', 'anjing', 'bangsat', 'kontol', 'memek', 'tolol', 'bodoh', 'shabi', 'caonima', 'gou ri',
      'sb', 'ni ma', 'ssibal', 'gaesaekki', 'jot', 'meongcheong', 'baegopa', '—Ö–µ–Ω—Ç–∞–π', 'hentai', '–º–∏–Ω–µ—Ç',
      'minet', '—ç—Ä–æ—Ç–∏–∫–∞', 'erotica'
    ];

    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–ª–æ—Ö–∏–µ —Å–ª–æ–≤–∞
    function containsBadWords(text) {
      if (!text) return false;
      const lowerText = text.toLowerCase();
      return globalBadWords.some(word => lowerText.includes(word));
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∞–ª–µ—Ä—Ç–æ–≤ –≤ –≤–∏–¥–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function showAlertModal(message) {
        let errorModal = document.getElementById('error-modal');
        let errorMessage = document.getElementById('error-message');
        let errorOkBtn = document.getElementById('error-ok-btn');
        
        // –ï—Å–ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –Ω–µ—Ç - —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
        if (!errorModal) {
            const style = document.createElement('style');
            style.textContent = `
                #error-modal {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.7);
                    justify-content: center;
                    align-items: center;
                    z-index: 10000;
                }
                #error-modal.show {
                    display: flex;
                }
                #error-modal-content {
                    background: linear-gradient(180deg, #0d0870, #0b0862);
                    padding: 25px;
                    border-radius: 16px;
                    text-align: center;
                    max-width: 400px;
                    width: 90%;
                    border: 1px solid #5f57ff;
                    box-shadow: 0 0 30px rgba(95,87,255,0.3);
                }
                #error-message {
                    color: #e0e0ff;
                    margin-bottom: 20px;
                    word-wrap: break-word;
                }
                #error-ok-btn {
                    background: linear-gradient(180deg, #251897, #1b1280);
                    color: #d9d9d9;
                    border: 1px solid rgba(255,255,255,0.08);
                    padding: 10px 20px;
                    border-radius: 12px;
                    cursor: pointer;
                    font-size: 1rem;
                    font-weight: 600;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.35);
                }
            `;
            document.head.appendChild(style);
            
            const modalHtml = `
                <div id="error-modal" class="show">
                    <div id="error-modal-content">
                        <p id="error-message"></p>
                        <button id="error-ok-btn">OK</button>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            
            errorModal = document.getElementById('error-modal');
            errorMessage = document.getElementById('error-message');
            errorOkBtn = document.getElementById('error-ok-btn');
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        errorMessage.textContent = message;
        errorModal.classList.add('show');
        
        errorOkBtn.onclick = () => {
            errorModal.classList.remove('show');
        };
    }
    
    document.addEventListener("click", function (event) {
    const t = event.target;

    if (
        t.tagName !== "INPUT" &&
        t.tagName !== "TEXTAREA" &&
        t.tagName !== "SELECT" &&
        !t.isContentEditable
    ) {
        if (document.activeElement && document.activeElement.blur) {
        document.activeElement.blur();
        }
    }
    });
    document.getElementById("nameInput").addEventListener("input", function () {
        this.value = this.value.replace(/[^a-zA-Z–∞-—è–ê-–Ø—ë–Å0-9\-\_\s]/g, "");
        if (containsBadWords(this.value)) {
          this.value = this.value.replace(/[–∞-—è–ê-–Ø—ë–Åa-zA-Z0-9\-\_\s]/g, '').length > 0 ? this.value.slice(0, -1) : this.value;
        }
    });

    let lang = localStorage.getItem('lang') || 'en';

    if (lang === 'ru') {
      document.getElementById('save').textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–º—è';
      document.getElementById('deleteAvatar').textContent = '–£–¥–∞–ª–∏—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É';
    } else {
      document.getElementById('save').textContent = 'Save name';
      document.getElementById('deleteAvatar').textContent = 'Delete Avatar';
    }
    let translations = {
      ru: {
        userTitle: "–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å",
        historySectionTitle: "–ò—Å—Ç–æ—Ä–∏—è",
        nickHistoryTitle: "–ò—Å—Ç–æ—Ä–∏—è –Ω–∏–∫–Ω–µ–π–º–æ–≤",
        descHistoryTitle: "–ò—Å—Ç–æ—Ä–∏—è –æ–ø–∏—Å–∞–Ω–∏–π",
        usageTimeTitle: "–í—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"
      },
      en: {
        userTitle: "Profile",
        historySectionTitle: "History",
        nickHistoryTitle: "Nicknames History",
        descHistoryTitle: "Descriptions History",
        usageTimeTitle: "Usage Time"
      }
    };

    const DEFAULT_AVATAR = 'user_profile_photo.png';

    function initProfile() {
      let avatarSrc = localStorage.getItem('userAvatar');
      if (!avatarSrc) {
        avatarSrc = DEFAULT_AVATAR;
        localStorage.setItem('userAvatar', avatarSrc);
      }
      document.getElementById('avatarImg').src = avatarSrc;

      let userName = localStorage.getItem('userName');
      if (!userName) {
        userName = lang === 'ru' ? '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' : 'User';
        localStorage.setItem('userName', userName);
      }
      document.getElementById('nameInput').value = userName;
      document.getElementById('userTitle').textContent = userName;
    }

    function calculateUsageDuration() {
      const firstDateStr = localStorage.getItem('first_use_date');
      if (!firstDateStr) return {days: 0, months: 0, years: 0};

      const first = new Date(firstDateStr);
      const now = new Date();
      let delta = new Date(now - first);

      let years = delta.getUTCFullYear() - 1970;
      let months = delta.getUTCMonth();
      let days = delta.getUTCDate() - 1;

      return {days, months, years};
    }

    function getPluralForm(number, forms) {
      if (number % 10 === 1 && number % 100 !== 11) return forms[0];
      if (number % 10 >= 2 && number % 10 <= 4 && (number % 100 < 10 || number % 100 >= 20)) return forms[1];
      return forms[2];
    }

    function formatDate(dateStr) {
      const date = new Date(dateStr);
      const day = date.getDate().toString().padStart(2, '0');
      const month = (date.getMonth() + 1).toString().padStart(2, '0');
      const year = date.getFullYear().toString().slice(-2);
      return `${day}.${month}.${year}`;
    }

    function showUserInfo() {
      const nickHistElem = document.getElementById('nickHistories');
      const descHistElem = document.getElementById('descHistories');
      const usageElem = document.getElementById('usageTimes');
      const firstDate = localStorage.getItem('first_use_date');
      const firstEntryText = lang === 'ru' ? '–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥: ' : 'First entry: ';
      const usageText = lang === 'ru' ? '–í—ã –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º —É–∂–µ ' : 'You have been using the app for ';
      const {days, months, years} = calculateUsageDuration();
      let duration = '';
      if (lang === 'ru') {
        const yearForm = getPluralForm(years, ['–≥–æ–¥', '–≥–æ–¥–∞', '–ª–µ—Ç']);
        const monthForm = getPluralForm(months, ['–º–µ—Å—è—Ü', '–º–µ—Å—è—Ü–∞', '–º–µ—Å—è—Ü–µ–≤']);
        const dayForm = getPluralForm(days, ['–¥–µ–Ω—å', '–¥–Ω—è', '–¥–Ω–µ–π']);
        duration = `${days} ${dayForm} ${months} ${monthForm} ${years} ${yearForm}`;
        nickHistElem.innerHTML = localStorage.getItem('nick_story') || '–ù–µ—Ç';
        descHistElem.innerHTML = localStorage.getItem('desc_story') || '–ù–µ—Ç';
        usageElem.innerHTML =
          `<ul><li>${firstEntryText}${formatDate(firstDate)}</li>` +
          `<li>${usageText}${duration}</li></ul>`;
      } else {
        const yearForm = years === 1 ? 'year' : 'years';
        const monthForm = months === 1 ? 'month' : 'months';
        const dayForm = days === 1 ? 'day' : 'days';
        duration = `${days} ${dayForm} ${months} ${monthForm} ${years} ${yearForm}`;
        nickHistElem.innerHTML = localStorage.getItem('nick_story') || 'None';
        descHistElem.innerHTML = localStorage.getItem('desc_story') || 'None';
        usageElem.innerHTML =
          `<ul><li>${firstEntryText}${formatDate(firstDate)}</li>` +
          `<li>${usageText}${duration}</li></ul>`;
      }
    }

    function saveName() {
      const nameInput = document.getElementById('nameInput');
      const newName = nameInput.value.trim();
      if (newName) {
        localStorage.setItem('userName', newName);
        showAlertModal(lang === 'ru' ? '–ò–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!' : 'Name saved!');
        document.getElementById('userTitle').textContent = newName;
      } else {
        showAlertModal(lang === 'ru' ? '–í–≤–µ–¥–∏—Ç–µ –∏–º—è!' : 'Enter a name!');
      }
    }

    function deleteAvatar() {
      const confirmMessage = lang === 'ru' ? '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É?' : 'Are you sure you want to delete your avatar?';
      if (confirm(confirmMessage)) {
        localStorage.setItem('userAvatar', DEFAULT_AVATAR);
        document.getElementById('avatarImg').src = DEFAULT_AVATAR;
        showAlertModal(lang === 'ru' ? '–ê–≤–∞—Ç–∞—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∞!' : 'Avatar deleted!');
      }
    }

    document.getElementById('avatarInput').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const dataURL = e.target.result;
          document.getElementById('avatarImg').src = dataURL;
          localStorage.setItem('userAvatar', dataURL);
          showAlertModal(lang === 'ru' ? '–ê–≤–∞—Ç–∞—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!' : 'Avatar updated!');
        };
        reader.readAsDataURL(file);
      }
    });

    document.querySelectorAll('[data-translate]').forEach(el => {
      const key = el.getAttribute('data-translate');
      if (translations[lang][key] !== undefined) {
        el.textContent = translations[lang][key];
      }
    });

    initProfile();
    showUserInfo();

    document.getElementById('userBackBtn').onclick = () => {
      window.location.href = 'main.html';
    };

    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.card-header').forEach(header => {
        header.addEventListener('click', () => {
          const content = header.nextElementSibling;
          const icon = header.querySelector('.toggle-btn i');
          if (content.style.display === 'none' || content.style.display === '') {
            content.style.display = 'block';
            icon.classList.remove('fa-caret-down');
            icon.classList.add('fa-caret-up');
          } else {
            content.style.display = 'none';
            icon.classList.remove('fa-caret-up');
            icon.classList.add('fa-caret-down');
          }
        });
      });
    });
    if (localStorage.getItem('lang') === 'ru' && localStorage.getItem('bage1') === 'yes' && localStorage.getItem('premium') === 'yes'){
      document.getElementById('userTitle').textContent = ' üëë–ü—Ä–µ–º–∏—É–ºüëë\n' + localStorage.getItem('userName');
      document.getElementById('userTitle').style.whiteSpace = 'pre-line';
    }
    else if (localStorage.getItem('lang') === 'en' && localStorage.getItem('bage1') === 'yes' && localStorage.getItem('premium') === 'yes'){
      document.getElementById('userTitle').textContent = ' üëëPremiumüëë\n' + localStorage.getItem('userName');
      document.getElementById('userTitle').style.whiteSpace = 'pre-line';
    }
    else{
      document.getElementById('userTitle').textContent = localStorage.getItem('userName');
    }
  </script>
  <script type="text/javascript">
      document.ondragstart = noselect;
      document.onselectstart = noselect;
      document.oncontextmenu = noselect;

      function noselect() {
          return false;
      }
  </script>

  <script>
  // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–π
  function applyAnimations() {
      if (localStorage.getItem('animations') === 'no') {
          document.body.classList.add('no-animations');
      } else {
          document.body.classList.remove('no-animations');
      }
  }
  applyAnimations();
  </script>
  <script src="apply_app_view.js"></script>
</body>
</html>