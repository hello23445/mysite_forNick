<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Создать никнейм</title>
  <style>
    body{
        background-color: #060039;
        color: #d9d9d9;
    }
    #welcomeMessage {
        text-align: center;
        margin-top: 50px;
    }
    button {
        
        background-color: darkblue;
        color: #d9d9d9;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
    }
  </style>
</head>
<body>
  <h1 id="welcomeMessage">
    Добро пожаловать в обновленную версию мини-приложения бота 'Создать никнейм'
  </h1>
  <center>
    <button id="continueButton" onclick="window.location.href = redirectUrl;">Далее</button>
  </center>
  <script>
    function showAlertModal(message) {
      const overlay = document.createElement('div');
      overlay.style.cssText = `position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); display: flex; justify-content: center; align-items: center; z-index: 10000;`;
      const modalBox = document.createElement('div');
      modalBox.style.cssText = `background: #060039; color: #d9d9d9; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); max-width: 300px; text-align: center; font-family: Arial, sans-serif; white-space: pre-line;`;
      const messageText = document.createElement('p');
      messageText.textContent = message;
      messageText.style.cssText = `margin: 0 0 15px 0; font-size: 16px;`;
      const closeBtn = document.createElement('button');
      closeBtn.textContent = 'OK';
      closeBtn.style.cssText = `background: #251897; color: #d9d9d9; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 16px;`;
      closeBtn.addEventListener('click', () => { overlay.remove(); });
      modalBox.appendChild(messageText);
      modalBox.appendChild(closeBtn);
      overlay.appendChild(modalBox);
      document.body.appendChild(overlay);
    }

    // Переменная для перенаправления
    const redirectUrl = "main.html"; // Имя файла для перенаправления

    // Элементы DOM
    const welcomeMessage = document.getElementById('welcomeMessage');
    const continueButton = document.getElementById('continueButton');
    const hasVisited = localStorage.getItem('hasVisited');

    if (localStorage.getItem('hasVisited') === 'true') {
        window.location.href = redirectUrl; // Перенаправление, если пользователь уже посетил страницу
    }
    // Проверка статуса технического обслуживания
    const maintenanceStatus = localStorage.getItem('m');
    if (maintenanceStatus === 'Скоро' || maintenanceStatus === 'скоро') {
      showAlertModal('Скоро начнется техническое обслуживание\nTechnical maintenance will start soon');
    } else if (maintenanceStatus === 'Уже' || maintenanceStatus === 'уже') {
      showAlertModal('Идет техническое обслуживание');
      welcomeMessage.innerHTML = 'Проводится техническое обслуживание.<br>Technical maintenance is in progress.';
      welcomeMessage.style.display = 'block';
      continueButton.style.display = 'none'; // Скрываем кнопку во время обслуживания
    } else if (!hasVisited) {
      // Первый вход: показываем сообщение и кнопку
      welcomeMessage.style.display = 'block';
      continueButton.style.display = 'block';
      localStorage.setItem('hasVisited', 'true');
    }
  </script>
</body>
</html>